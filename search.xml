<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>使用Hexo写文章</title>
    <url>/2020/06/07/%E4%BD%BF%E7%94%A8Hexo%E5%86%99%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<h1 id="本地写文章"><a href="#本地写文章" class="headerlink" title="本地写文章"></a>本地写文章</h1><p>选中你的Blog文件夹,右键单击，选择 <span id="inline-purple"> Git Bash Here </span><br><img src="/2020/06/07/%E4%BD%BF%E7%94%A8Hexo%E5%86%99%E6%96%87%E7%AB%A0/1.png" alt="代替图片的文字，随便写"></p>
<h2 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h2><p>输入指令 hexo new xxx (xxx为文章标题)<br><img src="/2020/06/07/%E4%BD%BF%E7%94%A8Hexo%E5%86%99%E6%96%87%E7%AB%A0/2.png" alt="代替图片的文字，随便写"></p>
<h2 id="写文章"><a href="#写文章" class="headerlink" title="写文章"></a>写文章</h2><p>编辑器写完，ctrl+s 保存</p>
<h2 id="在文章插入图片"><a href="#在文章插入图片" class="headerlink" title="在文章插入图片"></a>在文章插入图片</h2><p>1.安装插件<br>选中你的Blog文件夹,右键单击，选择 Git Bash Here 执行</p>
<figure class="highlight plain"><figcaption><span>[]</span></figcaption><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>

<p>2.打开hexo的配置文件_config.yml<br>找到 post_asset_folder，把这个选项从false改成true</p>
<p>3.修改代码<br>打开 Blog/node_modules/hexo-asset-image/index.js<br>将内容替换为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;use strict&#39;;</span><br><span class="line">var cheerio &#x3D; require(&#39;cheerio&#39;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;14480345&#x2F;how-to-get-the-nth-occurrence-in-a-string</span><br><span class="line">function getPosition(str, m, i) &#123;</span><br><span class="line">  return str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var version &#x3D; String(hexo.version).split(&#39;.&#39;);</span><br><span class="line">hexo.extend.filter.register(&#39;after_post_render&#39;, function(data)&#123;</span><br><span class="line">  var config &#x3D; hexo.config;</span><br><span class="line">  if(config.post_asset_folder)&#123;</span><br><span class="line">        var link &#x3D; data.permalink;</span><br><span class="line">    if(version.length &gt; 0 &amp;&amp; Number(version[0]) &#x3D;&#x3D; 3)</span><br><span class="line">       var beginPos &#x3D; getPosition(link, &#39;&#x2F;&#39;, 1) + 1;</span><br><span class="line">    else</span><br><span class="line">       var beginPos &#x3D; getPosition(link, &#39;&#x2F;&#39;, 3) + 1;</span><br><span class="line">    &#x2F;&#x2F; In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;...&#x2F;about&#x2F;index.html&quot;.</span><br><span class="line">    var endPos &#x3D; link.lastIndexOf(&#39;&#x2F;&#39;) + 1;</span><br><span class="line">    link &#x3D; link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    var toprocess &#x3D; [&#39;excerpt&#39;, &#39;more&#39;, &#39;content&#39;];</span><br><span class="line">    for(var i &#x3D; 0; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      var key &#x3D; toprocess[i];</span><br><span class="line"> </span><br><span class="line">      var $ &#x3D; cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: false,</span><br><span class="line">        xmlMode: false,</span><br><span class="line">        lowerCaseTags: false,</span><br><span class="line">        decodeEntities: false</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(&#39;img&#39;).each(function()&#123;</span><br><span class="line">        if ($(this).attr(&#39;src&#39;))&#123;</span><br><span class="line">            &#x2F;&#x2F; For windows style path, we replace &#39;\&#39; to &#39;&#x2F;&#39;.</span><br><span class="line">            var src &#x3D; $(this).attr(&#39;src&#39;).replace(&#39;\\&#39;, &#39;&#x2F;&#39;);</span><br><span class="line">            if(!&#x2F;http[s]*.*|\&#x2F;\&#x2F;.*&#x2F;.test(src) &amp;&amp;</span><br><span class="line">               !&#x2F;^\s*\&#x2F;&#x2F;.test(src)) &#123;</span><br><span class="line">              &#x2F;&#x2F; For &quot;about&quot; page, the first part of &quot;src&quot; can&#39;t be removed.</span><br><span class="line">              &#x2F;&#x2F; In addition, to support multi-level local directory.</span><br><span class="line">              var linkArray &#x3D; link.split(&#39;&#x2F;&#39;).filter(function(elem)&#123;</span><br><span class="line">                return elem !&#x3D; &#39;&#39;;</span><br><span class="line">              &#125;);</span><br><span class="line">              var srcArray &#x3D; src.split(&#39;&#x2F;&#39;).filter(function(elem)&#123;</span><br><span class="line">                return elem !&#x3D; &#39;&#39; &amp;&amp; elem !&#x3D; &#39;.&#39;;</span><br><span class="line">              &#125;);</span><br><span class="line">              if(srcArray.length &gt; 1)</span><br><span class="line">                srcArray.shift();</span><br><span class="line">              src &#x3D; srcArray.join(&#39;&#x2F;&#39;);</span><br><span class="line">              $(this).attr(&#39;src&#39;, config.root + link + src);</span><br><span class="line">              console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;);</span><br><span class="line">            console.info&amp;&amp;console.info($(this));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] &#x3D; $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>4.插入图片<br>将图片复制到和文章标题重名的文件夹，采用以下方式引用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![这是代替图片的文字，随便写](图片名字.jpg)</span><br></pre></td></tr></table></figure>
<h1 id="本地预览（非必须）"><a href="#本地预览（非必须）" class="headerlink" title="本地预览（非必须）"></a>本地预览（非必须）</h1><p>执行 hexo s 指令，浏览器打开 <a href="http://locahost:4000" target="_blank" rel="noopener">http://locahost:4000</a> 即可看到预览效果，Ctrl+C 退出</p>
<h1 id="渲染并部署网站"><a href="#渲染并部署网站" class="headerlink" title="渲染并部署网站"></a>渲染并部署网站</h1><h2 id="hexo-g渲染生成网站"><a href="#hexo-g渲染生成网站" class="headerlink" title="hexo g渲染生成网站"></a>hexo g渲染生成网站</h2><h2 id="hexo-d部署网站-把渲染好的html等网站文件，上传到GitHub服务器"><a href="#hexo-d部署网站-把渲染好的html等网站文件，上传到GitHub服务器" class="headerlink" title="hexo d部署网站(把渲染好的html等网站文件，上传到GitHub服务器)"></a>hexo d部署网站(把渲染好的html等网站文件，上传到GitHub服务器)</h2><p>最后一句 INFO Deploy done: git 表示部署已完成</p>
]]></content>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
</search>
